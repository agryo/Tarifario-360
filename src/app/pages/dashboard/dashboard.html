<!-- Toast para mensagens -->
<p-toast position="top-center"></p-toast>

<p-confirmDialog [style]="{ width: '450px' }"></p-confirmDialog>

<div class="dashboard">
  <!-- Cabe√ßalho com sauda√ß√£o e bot√µes -->
  <div class="flex justify-content-between align-items-center mb-4">
    <div>
      <h1 class="text-3xl font-bold">üè® Tarif√°rio 360</h1>
      <p class="text-secondary">Sistema de Gest√£o Hoteleira</p>
    </div>
    <div class="flex align-items-center gap-2">
      <!-- Theme Toggle -->
      <app-theme-toggle></app-theme-toggle>

      <!-- Bot√£o Configura√ß√µes -->
      <p-button
        label="Configura√ß√µes"
        icon="pi pi-cog"
        styleClass="p-button-help p-button-raised"
        (click)="abrirConfiguracoes()"
      >
      </p-button>
    </div>
  </div>

  <!-- Cards de resumo -->
  <div class="grid mb-4">
    <div class="col-12 md:col-6 lg:col-3">
      <p-card styleClass="dashboard-card">
        <div class="flex align-items-center gap-3">
          <div class="card-icon bg-primary">
            <i class="pi pi-tag"></i>
          </div>
          <div>
            <span class="text-secondary block">Categorias</span>
            <span class="text-3xl font-bold">{{ totalCategorias }}</span>
          </div>
        </div>
      </p-card>
    </div>

    <div class="col-12 md:col-6 lg:col-3">
      <p-card styleClass="dashboard-card">
        <div class="flex align-items-center gap-3">
          <div class="card-icon bg-success">
            <i class="pi pi-percentage"></i>
          </div>
          <div>
            <span class="text-secondary block">Promo√ß√µes</span>
            <span class="text-3xl font-bold">{{ totalPromocoes }}</span>
          </div>
        </div>
      </p-card>
    </div>

    <div class="col-12 md:col-6 lg:col-3">
      <p-card styleClass="dashboard-card">
        <div class="flex align-items-center gap-3">
          <div class="card-icon bg-warning">
            <i class="pi pi-bolt"></i>
          </div>
          <div>
            <span class="text-secondary block">kWh</span>
            <span class="text-3xl font-bold">{{ config.valorKwh | currency: 'BRL' }}</span>
          </div>
        </div>
      </p-card>
    </div>

    <div class="col-12 md:col-6 lg:col-3">
      <p-card styleClass="dashboard-card">
        <div class="flex align-items-center gap-3">
          <div class="card-icon bg-info">
            <i class="pi pi-coffee"></i>
          </div>
          <div>
            <span class="text-secondary block">Almo√ßo</span>
            <span class="text-3xl font-bold">{{ config.valorAlmocoExtra | currency: 'BRL' }}</span>
          </div>
        </div>
      </p-card>
    </div>
  </div>

  <!-- Cards de M√≥dulos -->
  <h2 class="text-2xl font-bold mb-3">M√≥dulos</h2>
  <div class="grid">
    <!-- Or√ßamento R√°pido -->
    <div class="col-12 md:col-6 lg:col-4">
      <p-card styleClass="module-card" header="‚ö° Or√ßamento R√°pido" subheader="WhatsApp">
        <p class="module-description">
          Gere or√ßamentos instant√¢neos com emojis para enviar pelo WhatsApp
        </p>
        <div class="module-features">
          <span><i class="pi pi-check-circle text-success mr-2"></i>Alta/Baixa autom√°tico</span>
          <span><i class="pi pi-check-circle text-success mr-2"></i>Promo√ß√µes aplicadas</span>
          <span><i class="pi pi-check-circle text-success mr-2"></i>C√≥pia com formata√ß√£o</span>
        </div>
        <div class="flex justify-content-end mt-3">
          <p-button label="Acessar" icon="pi pi-whatsapp" styleClass="p-button-success"></p-button>
        </div>
      </p-card>
    </div>

    <!-- Or√ßamento Oficial -->
    <div class="col-12 md:col-6 lg:col-4">
      <p-card
        styleClass="module-card"
        header="üìÑ Or√ßamento Oficial"
        subheader="Propostas detalhadas"
      >
        <p class="module-description">Crie propostas formais para grupos, empresas e eventos</p>
        <div class="module-features">
          <span><i class="pi pi-check-circle text-success mr-2"></i>M√∫ltiplos itens</span>
          <span><i class="pi pi-check-circle text-success mr-2"></i>Alimenta√ß√£o inclusa</span>
          <span><i class="pi pi-check-circle text-success mr-2"></i>Exportar PDF</span>
        </div>
        <div class="flex justify-content-end mt-3">
          <p-button label="Acessar" icon="pi pi-file-pdf" styleClass="p-button-help"></p-button>
        </div>
      </p-card>
    </div>

    <!-- Tabela de Op√ß√µes -->
    <div class="col-12 md:col-6 lg:col-4">
      <p-card styleClass="module-card" header="üìã Tabela de Op√ß√µes" subheader="Comparativo">
        <p class="module-description">
          Compare m√∫ltiplas op√ß√µes de quartos para oferecer ao cliente
        </p>
        <div class="module-features">
          <span><i class="pi pi-check-circle text-success mr-2"></i>Filtros inteligentes</span>
          <span><i class="pi pi-check-circle text-success mr-2"></i>Separa√ß√£o solteiro/casal</span>
          <span><i class="pi pi-check-circle text-success mr-2"></i>Com/sem caf√©</span>
        </div>
        <div class="flex justify-content-end mt-3">
          <p-button label="Acessar" icon="pi pi-table" styleClass="p-button-info"></p-button>
        </div>
      </p-card>
    </div>

    <!-- Tabela de Pre√ßos -->
    <div class="col-12 md:col-6 lg:col-4">
      <p-card styleClass="module-card" header="üìä Tabela de Pre√ßos" subheader="Visualiza√ß√£o">
        <p class="module-description">Visualize e imprima tabelas de pre√ßos por temporada</p>
        <div class="module-features">
          <span><i class="pi pi-check-circle text-success mr-2"></i>Alta/Baixa temporada</span>
          <span><i class="pi pi-check-circle text-success mr-2"></i>Agrupamento UHs</span>
          <span><i class="pi pi-check-circle text-success mr-2"></i>Formato para impress√£o</span>
        </div>
        <div class="flex justify-content-end mt-3">
          <p-button label="Acessar" icon="pi pi-chart-bar" styleClass="p-button-warning"></p-button>
        </div>
      </p-card>
    </div>

    <!-- Calculadora Wallbox -->
    <div class="col-12 md:col-6 lg:col-4">
      <p-card styleClass="module-card" header="üîå Calculadora Wallbox" subheader="Recarga el√©trica">
        <p class="module-description">Calcule o custo de recarga de ve√≠culos el√©tricos</p>
        <div class="module-features">
          <span><i class="pi pi-check-circle text-success mr-2"></i>kWh configur√°vel</span>
          <span><i class="pi pi-check-circle text-success mr-2"></i>C√°lculo autom√°tico</span>
          <span><i class="pi pi-check-circle text-success mr-2"></i>Integra√ß√£o com tarifas</span>
        </div>
        <div class="flex justify-content-end mt-3">
          <p-button label="Acessar" icon="pi pi-bolt" styleClass="p-button-danger"></p-button>
        </div>
      </p-card>
    </div>
  </div>
</div>

<!-- ===== DIALOG DE SENHA ===== -->
<p-dialog
  [(visible)]="senhaDialogVisible"
  [style]="{ width: '400px' }"
  header="üîí Painel Protegido"
  [modal]="true"
  [closable]="false"
  [draggable]="false"
  [resizable]="false"
>
  <ng-template pTemplate="content">
    <div class="p-fluid text-center">
      <i
        class="pi pi-lock"
        style="font-size: 3rem; color: var(--primary-color); margin-bottom: 1rem"
      ></i>
      <p class="mb-3">Digite a senha mestra para acessar as configura√ß√µes:</p>

      <div class="field">
        <input
          type="password"
          pInputText
          [(ngModel)]="senhaInput"
          placeholder="Senha do sistema"
          class="w-full"
          (keyup.enter)="verificarSenha()"
          autofocus
        />
      </div>
    </div>
  </ng-template>

  <ng-template pTemplate="footer">
    <div class="flex justify-content-center gap-2">
      <p-button
        label="Cancelar"
        icon="pi pi-times"
        styleClass="p-button-text"
        (click)="senhaDialogVisible = false; senhaInput = ''"
      >
      </p-button>
      <p-button
        label="Entrar"
        icon="pi pi-check"
        styleClass="p-button-success"
        (click)="verificarSenha()"
      >
      </p-button>
    </div>
  </ng-template>
</p-dialog>

<!-- ===== MODAL DE CONFIGURA√á√ïES ===== -->
<p-dialog
  [(visible)]="configDialogVisible"
  [style]="{ width: '1400px', maxHeight: '99vh' }"
  header="‚öôÔ∏è Painel Master - Configura√ß√µes Globais do Sistema"
  [modal]="true"
  [draggable]="false"
  [resizable]="false"
>
  <ng-template pTemplate="content">
    <p-tabs value="0">
      <p-tablist>
        <p-tab value="0">üìã Tarif√°rio</p-tab>
        <p-tab value="1">üéÅ Promo√ß√µes</p-tab>
        <p-tab value="2">‚è∞ Hor√°rios</p-tab>
        <p-tab value="3">üîê Seguran√ßa</p-tab>
        <p-tab value="4">üíæ Backup</p-tab>
      </p-tablist>

      <p-tabpanels>
        <!-- ===== TAB 1: TARIF√ÅRIO ===== -->
        <p-tabpanel value="0">
          <!-- Configura√ß√µes do topo -->
          <div class="grid mb-3">
            <div class="col-12 md:col-4">
              <div class="field">
                <label>Nome da Festividade (Or√ßamento R√°pido)</label>
                <input type="text" pInputText [(ngModel)]="config.festividade" class="w-full" />
              </div>
            </div>
            <div class="col-12 md:col-2">
              <div class="field">
                <label>Valor Almo√ßo (R$)</label>
                <p-inputNumber
                  [(ngModel)]="config.valorAlmocoExtra"
                  mode="currency"
                  currency="BRL"
                  styleClass="w-full"
                ></p-inputNumber>
              </div>
            </div>
            <div class="col-12 md:col-2">
              <div class="field">
                <label>Valor kWh (R$)</label>
                <p-inputNumber
                  [(ngModel)]="config.valorKwh"
                  mode="currency"
                  currency="BRL"
                  styleClass="w-full"
                ></p-inputNumber>
              </div>
            </div>
            <div class="col-12 md:col-2">
              <div class="field">
                <label>Qtd. Total de UHs</label>
                <p-inputNumber
                  [(ngModel)]="config.totalUhs"
                  [min]="1"
                  styleClass="w-full"
                ></p-inputNumber>
              </div>
            </div>
          </div>

          <!-- Comodidades Globais -->
          <div class="grid mb-3">
            <div class="col-12">
              <div class="field">
                <label>Comodidades Globais (Separe por v√≠rgula)</label>
                <input
                  type="text"
                  pInputText
                  [(ngModel)]="config.comodidadesGlobais"
                  class="w-full"
                  placeholder="Frigobar, TV, Hidro, Ar-condicionado..."
                />
              </div>
            </div>
          </div>

          <!-- Datas da Alta Temporada -->
          <div class="grid mb-3">
            <div class="col-12 md:col-3">
              <div class="field">
                <label>In√≠cio Alta Temporada</label>
                <input type="date" pInputText [(ngModel)]="config.altaInicio" class="w-full" />
              </div>
            </div>
            <div class="col-12 md:col-3">
              <div class="field">
                <label>Fim Alta Temporada</label>
                <input type="date" pInputText [(ngModel)]="config.altaFim" class="w-full" />
              </div>
            </div>
          </div>

          <!-- Bot√£o Adicionar UH -->
          <div class="flex justify-content-end mb-3">
            <p-button
              label="‚ûï ADICIONAR NOVA UH"
              icon="pi pi-plus"
              styleClass="p-button-success p-button-sm"
              (click)="adicionarUH()"
            ></p-button>
          </div>

          <!-- Tabela de UHs -->
          <p-table
            [value]="categorias"
            styleClass="p-datatable-sm"
            [scrollable]="true"
            scrollHeight="300px"
          >
            <ng-template pTemplate="header">
              <tr>
                <th rowspan="2">UH (Unidade)</th>
                <th colspan="2">Alta Temporada</th>
                <th colspan="2">Baixa Temporada</th>
                <th rowspan="2">A√ß√µes</th>
              </tr>
              <tr>
                <th class="sub-th">C/ Caf√©</th>
                <th class="sub-th">S/ Caf√©</th>
                <th class="sub-th">C/ Caf√©</th>
                <th class="sub-th">S/ Caf√©</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-cat>
              <tr>
                <td>{{ cat.nome }}</td>
                <td>{{ cat.precoAltaCafe | currency: 'BRL' }}</td>
                <td>{{ cat.precoAltaSemCafe | currency: 'BRL' }}</td>
                <td>{{ cat.precoBaixaCafe | currency: 'BRL' }}</td>
                <td>{{ cat.precoBaixaSemCafe | currency: 'BRL' }}</td>
                <td>
                  <div class="flex gap-2">
                    <p-button
                      icon="pi pi-pencil"
                      styleClass="p-button-text p-button-sm"
                      (click)="editarUH(cat)"
                    ></p-button>
                    <p-button
                      icon="pi pi-trash"
                      styleClass="p-button-text p-button-danger p-button-sm"
                      (click)="excluirUH(cat)"
                    ></p-button>
                  </div>
                </td>
              </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage">
              <tr>
                <td colspan="6" class="text-center p-3">
                  Nenhuma UH cadastrada. Clique em "ADICIONAR NOVA UH" para come√ßar.
                </td>
              </tr>
            </ng-template>
          </p-table>
        </p-tabpanel>

        <!-- ===== TAB 2: PROMO√á√ïES ===== -->
        <p-tabpanel value="1">
          <div class="grid">
            <div class="col-12">
              <div class="field-checkbox mb-3">
                <p-checkbox
                  [(ngModel)]="config.promocaoAtiva"
                  [binary]="true"
                  inputId="promoAtiva"
                ></p-checkbox>
                <label for="promoAtiva" class="ml-2 font-bold" style="color: #d84315"
                  >ATIVAR PROMO√á√ïES</label
                >
                <small class="ml-2 text-secondary"
                  >(Liga/Desliga todo o sistema de promo√ß√µes nos or√ßamentos)</small
                >
              </div>
            </div>

            <div class="col-12 md:col-3">
              <div class="field">
                <label>Desconto (%)</label>
                <p-inputNumber
                  [(ngModel)]="config.promocaoDesconto"
                  [min]="0"
                  [max]="100"
                  styleClass="w-full"
                ></p-inputNumber>
              </div>
            </div>

            <div class="col-12 md:col-3">
              <div class="field">
                <label>M√≠nimo de Di√°rias</label>
                <p-inputNumber
                  [(ngModel)]="config.promocaoMinDiarias"
                  [min]="0"
                  styleClass="w-full"
                ></p-inputNumber>
              </div>
            </div>

            <div class="col-12 md:col-6">
              <div class="field">
                <label>Condi√ß√£o / Forma de Pagamento</label>
                <input
                  type="text"
                  pInputText
                  [(ngModel)]="config.promocaoTexto"
                  class="w-full"
                  placeholder="Ex: Pagamento integral via Pix ou Dinheiro"
                />
              </div>
            </div>

            <div class="col-12">
              <div class="grid">
                <div class="col-12 md:col-4">
                  <div class="field-checkbox">
                    <p-checkbox
                      [(ngModel)]="config.promocaoSomenteAlta"
                      [binary]="true"
                      inputId="promoSomenteAlta"
                    ></p-checkbox>
                    <label for="promoSomenteAlta" class="ml-2">SOMENTE NA ALTA TEMPORADA</label>
                  </div>
                  <small class="text-secondary block"
                    >Se marcado, o desconto s√≥ ser√° aplicado se as datas estiverem na Alta
                    Temporada.</small
                  >
                </div>

                <div class="col-12 md:col-4">
                  <div class="field-checkbox">
                    <p-checkbox
                      [(ngModel)]="config.promocaoMsgBaixa"
                      [binary]="true"
                      inputId="promoMsgBaixa"
                    ></p-checkbox>
                    <label for="promoMsgBaixa" class="ml-2">MENSAGEM NA BAIXA</label>
                  </div>
                  <small class="text-secondary block"
                    >Exibe o texto da promo√ß√£o na Baixa Temporada apenas como informativo, sem
                    aplicar o desconto.</small
                  >
                </div>
              </div>
            </div>
          </div>
        </p-tabpanel>

        <!-- ===== TAB 3: PAR√ÇMETROS GLOBAIS ===== -->
        <p-tabpanel value="2">
          <div class="grid">
            <div class="col-12 md:col-4">
              <div class="field">
                <label>Hor√°rio Caf√©</label>
                <div class="flex gap-2">
                  <input type="time" pInputText [(ngModel)]="config.cafeInicio" class="w-full" />
                  <span class="p-2">√†s</span>
                  <input type="time" pInputText [(ngModel)]="config.cafeFim" class="w-full" />
                </div>
                <div class="field-checkbox mt-1">
                  <p-checkbox
                    [(ngModel)]="config.cafeAtivo"
                    [binary]="true"
                    inputId="cafeAtivo"
                  ></p-checkbox>
                  <label for="cafeAtivo" class="ml-2">Exibir nas mensagens</label>
                </div>
              </div>
            </div>

            <div class="col-12 md:col-4">
              <div class="field">
                <label>Hor√°rio Almo√ßo</label>
                <div class="flex gap-2">
                  <input type="time" pInputText [(ngModel)]="config.almocoInicio" class="w-full" />
                  <span class="p-2">√†s</span>
                  <input type="time" pInputText [(ngModel)]="config.almocoFim" class="w-full" />
                </div>
                <div class="field-checkbox mt-1">
                  <p-checkbox
                    [(ngModel)]="config.almocoAtivo"
                    [binary]="true"
                    inputId="almocoAtivo"
                  ></p-checkbox>
                  <label for="almocoAtivo" class="ml-2">Exibir nas mensagens</label>
                </div>
              </div>
            </div>

            <div class="col-12 md:col-4">
              <div class="field">
                <label>Lanche √† Noite</label>
                <div class="flex gap-2">
                  <input type="time" pInputText [(ngModel)]="config.jantarInicio" class="w-full" />
                  <span class="p-2">√†s</span>
                  <input type="time" pInputText [(ngModel)]="config.jantarFim" class="w-full" />
                </div>
                <div class="field-checkbox mt-1">
                  <p-checkbox
                    [(ngModel)]="config.jantarAtivo"
                    [binary]="true"
                    inputId="jantarAtivo"
                  ></p-checkbox>
                  <label for="jantarAtivo" class="ml-2">Exibir nas mensagens</label>
                </div>
              </div>
            </div>
          </div>
        </p-tabpanel>

        <!-- ===== TAB 4: SEGURAN√áA ===== -->
        <p-tabpanel value="3">
          <div class="grid">
            <div class="col-12 md:col-6">
              <p-card header="üîê Senha de Acesso">
                <div class="field">
                  <label>Senha Atual</label>
                  <div class="flex gap-2">
                    <input
                      [type]="mostrarSenhaAtual ? 'text' : 'password'"
                      pInputText
                      [(ngModel)]="senhaAtualInput"
                      class="w-full"
                      placeholder="Digite a senha atual"
                    />
                    <p-button
                      [icon]="mostrarSenhaAtual ? 'pi pi-eye-slash' : 'pi pi-eye'"
                      styleClass="p-button-text"
                      (click)="mostrarSenhaAtual = !mostrarSenhaAtual"
                    ></p-button>
                  </div>
                </div>

                <div class="field">
                  <label>Nova Senha</label>
                  <div class="flex gap-2">
                    <input
                      [type]="mostrarNovaSenha ? 'text' : 'password'"
                      pInputText
                      [(ngModel)]="novaSenhaInput"
                      class="w-full"
                      placeholder="Digite a nova senha"
                    />
                    <p-button
                      [icon]="mostrarNovaSenha ? 'pi pi-eye-slash' : 'pi pi-eye'"
                      styleClass="p-button-text"
                      (click)="mostrarNovaSenha = !mostrarNovaSenha"
                    ></p-button>
                  </div>
                </div>

                <div class="field">
                  <label>Confirmar Nova Senha</label>
                  <div class="flex gap-2">
                    <input
                      [type]="mostrarConfirmarSenha ? 'text' : 'password'"
                      pInputText
                      [(ngModel)]="confirmarSenhaInput"
                      class="w-full"
                      placeholder="Confirme a nova senha"
                    />
                    <p-button
                      [icon]="mostrarConfirmarSenha ? 'pi pi-eye-slash' : 'pi pi-eye'"
                      styleClass="p-button-text"
                      (click)="mostrarConfirmarSenha = !mostrarConfirmarSenha"
                    ></p-button>
                  </div>
                </div>

                <div class="flex gap-2 mt-3">
                  <p-button
                    label="Alterar Senha"
                    icon="pi pi-key"
                    styleClass="p-button-success"
                    (click)="alterarSenha()"
                  ></p-button>
                  <p-button
                    label="Remover Senha"
                    icon="pi pi-trash"
                    styleClass="p-button-danger"
                    (click)="removerSenha()"
                  ></p-button>
                </div>
              </p-card>
            </div>

            <div class="col-12 md:col-6">
              <p-card header="‚ÑπÔ∏è Status da Senha">
                <div class="flex align-items-center gap-3 mb-3">
                  <i
                    [class]="
                      config.senhaMaster
                        ? 'pi pi-check-circle text-success'
                        : 'pi pi-exclamation-circle text-warning'
                    "
                    style="font-size: 2rem"
                  ></i>
                  <div>
                    <h3 class="text-lg font-bold mb-1">
                      {{ config.senhaMaster ? 'Senha Ativa' : 'Sem Senha' }}
                    </h3>
                    <p class="text-secondary">
                      Acesso ao painel
                      {{ config.senhaMaster ? 'protegido por senha' : 'livre (sem prote√ß√£o)' }}
                    </p>
                  </div>
                </div>

                <div class="border-top-1 surface-border pt-3">
                  <h4 class="text-md font-bold mb-2">Dicas de Seguran√ßa:</h4>
                  <ul class="text-secondary">
                    <li>Use uma senha com pelo menos 6 caracteres</li>
                    <li>Evite senhas √≥bvias como "1234" ou "admin"</li>
                    <li>Altere a senha periodicamente</li>
                    <li>N√£o compartilhe a senha com pessoas n√£o autorizadas</li>
                  </ul>
                </div>
              </p-card>
            </div>
          </div>
        </p-tabpanel>

        <!-- ===== TAB 5: BACKUP ===== -->
        <p-tabpanel value="4">
          <div class="grid">
            <div class="col-12 md:col-6">
              <p-card header="üì§ Exportar Configura√ß√µes">
                <p class="mb-3">
                  Baixe um arquivo JSON com todas as configura√ß√µes do sistema, incluindo tarifas,
                  promo√ß√µes e par√¢metros.
                </p>
                <p-button
                  label="Exportar Backup"
                  icon="pi pi-download"
                  styleClass="p-button-success"
                  (click)="exportarBackup()"
                ></p-button>
              </p-card>
            </div>

            <div class="col-12 md:col-6">
              <p-card header="üì• Importar Configura√ß√µes">
                <p class="mb-3">
                  Carregue um arquivo JSON para restaurar configura√ß√µes previamente salvas.
                </p>
                <input
                  type="file"
                  accept=".json"
                  #fileInput
                  style="display: none"
                  (change)="importarBackup($event)"
                />
                <p-button
                  label="Importar Backup"
                  icon="pi pi-upload"
                  styleClass="p-button-warning"
                  (click)="fileInput.click()"
                ></p-button>
              </p-card>
            </div>

            <div class="col-12 mt-3">
              <p-card header="üßπ Limpeza">
                <p class="mb-3">
                  Limpa todos os dados do sistema e restaura as configura√ß√µes padr√£o.
                </p>
                <p-button
                  label="Limpar Cache do Sistema"
                  icon="pi pi-trash"
                  styleClass="p-button-danger"
                  (click)="limparCache()"
                ></p-button>
              </p-card>
            </div>
          </div>
        </p-tabpanel>
      </p-tabpanels>
    </p-tabs>
  </ng-template>

  <ng-template pTemplate="footer">
    <p-button
      label="Cancelar"
      icon="pi pi-times"
      styleClass="p-button-text"
      (click)="configDialogVisible = false"
    ></p-button>
    <p-button
      label="üíæ SALVAR TODAS AS ALTERA√á√ïES"
      icon="pi pi-check"
      styleClass="p-button-success"
      (click)="salvarConfiguracoes()"
    ></p-button>
  </ng-template>
</p-dialog>

<!-- DIALOG de Categoria -->
<p-dialog
  [(visible)]="categoriaDialog"
  [style]="{ width: '550px' }"
  header="Categoria de Quarto"
  [modal]="true"
>
  <ng-template pTemplate="content">
    <div class="p-fluid">
      <!-- Nome da UH -->
      <div class="field">
        <label>Nome da UH</label>
        <input
          type="text"
          pInputText
          [(ngModel)]="categoriaEdit.nome"
          class="w-full"
          placeholder="Ex: Standard, Luxo, Su√≠te..."
        />
      </div>

      <!-- Capacidade -->
      <div class="field">
        <label>Capacidade M√°xima</label>
        <p-inputNumber
          [(ngModel)]="categoriaEdit.capacidadeMaxima"
          [min]="1"
          styleClass="w-full"
        ></p-inputNumber>
      </div>

      <!-- Pre√ßos Alta Temporada -->
      <h4 class="text-md font-bold mb-2 mt-3">Alta Temporada</h4>
      <div class="grid">
        <div class="col-6">
          <div class="field">
            <label>Com Caf√© (R$)</label>
            <p-inputNumber
              [(ngModel)]="categoriaEdit.precoAltaCafe"
              mode="currency"
              currency="BRL"
              styleClass="w-full"
            >
            </p-inputNumber>
          </div>
        </div>
        <div class="col-6">
          <div class="field">
            <label>Sem Caf√© (R$)</label>
            <p-inputNumber
              [(ngModel)]="categoriaEdit.precoAltaSemCafe"
              mode="currency"
              currency="BRL"
              styleClass="w-full"
            >
            </p-inputNumber>
          </div>
        </div>
      </div>

      <!-- Pre√ßos Baixa Temporada -->
      <h4 class="text-md font-bold mb-2 mt-3">Baixa Temporada</h4>
      <div class="grid">
        <div class="col-6">
          <div class="field">
            <label>Com Caf√© (R$)</label>
            <p-inputNumber
              [(ngModel)]="categoriaEdit.precoBaixaCafe"
              mode="currency"
              currency="BRL"
              styleClass="w-full"
            >
            </p-inputNumber>
          </div>
        </div>
        <div class="col-6">
          <div class="field">
            <label>Sem Caf√© (R$)</label>
            <p-inputNumber
              [(ngModel)]="categoriaEdit.precoBaixaSemCafe"
              mode="currency"
              currency="BRL"
              styleClass="w-full"
            >
            </p-inputNumber>
          </div>
        </div>
      </div>

      <!-- Status Ativo -->
      <div class="field-checkbox mt-3">
        <p-checkbox [(ngModel)]="categoriaEdit.ativo" [binary]="true" inputId="ativo"></p-checkbox>
        <label for="ativo" class="ml-2">UH Ativa (dispon√≠vel para reservas)</label>
      </div>
    </div>
  </ng-template>

  <ng-template pTemplate="footer">
    <p-button
      label="Cancelar"
      icon="pi pi-times"
      styleClass="p-button-text"
      (click)="categoriaDialog = false"
    >
    </p-button>
    <p-button
      label="Salvar"
      icon="pi pi-check"
      styleClass="p-button-success"
      (click)="salvarCategoria()"
    >
    </p-button>
  </ng-template>
</p-dialog>

<!-- DIALOG de Promo√ß√£o -->
<p-dialog
  [(visible)]="promocaoDialog"
  [style]="{ width: '500px' }"
  header="Promo√ß√£o"
  [modal]="true"
>
  <ng-template pTemplate="content">
    <div class="p-fluid">
      <div class="field">
        <label>Nome da Promo√ß√£o</label>
        <input type="text" pInputText [(ngModel)]="promocaoEdit.nome" class="w-full" />
      </div>
      <div class="grid">
        <div class="col-6">
          <div class="field">
            <label>Desconto (%)</label>
            <p-inputNumber
              [(ngModel)]="promocaoEdit.desconto"
              [min]="0"
              [max]="100"
              styleClass="w-full"
            ></p-inputNumber>
          </div>
        </div>
        <div class="col-6">
          <div class="field">
            <label>Di√°rias M√≠nimas</label>
            <p-inputNumber
              [(ngModel)]="promocaoEdit.diasMinimos"
              [min]="1"
              styleClass="w-full"
            ></p-inputNumber>
          </div>
        </div>
      </div>
      <div class="field-checkbox mt-3">
        <p-checkbox
          [(ngModel)]="promocaoEdit.aplicaAlta"
          [binary]="true"
          inputId="aplicaAlta"
        ></p-checkbox>
        <label for="aplicaAlta" class="ml-2">Aplicar na Alta Temporada</label>
      </div>
      <div class="field">
        <label>Mensagem na Baixa Temporada</label>
        <input type="text" pInputText [(ngModel)]="promocaoEdit.mensagemBaixa" class="w-full" />
      </div>
    </div>
  </ng-template>

  <ng-template pTemplate="footer">
    <p-button
      label="Cancelar"
      icon="pi pi-times"
      styleClass="p-button-text"
      (click)="promocaoDialog = false"
    >
    </p-button>
    <p-button
      label="Salvar"
      icon="pi pi-check"
      styleClass="p-button-success"
      (click)="salvarPromocao()"
    >
    </p-button>
  </ng-template>
</p-dialog>
